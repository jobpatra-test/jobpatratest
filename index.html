<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JobPatra ‚Äì Find Real Jobs from Real Companies</title>

  <!-- ‚úÖ Google Verification -->
  <meta name="google-site-verification" content="your-unique-code" />

  <!-- ‚úÖ Basic SEO -->
  <meta name="description" content="JobPatra helps you discover verified company career pages, jobs, and hiring opportunities across India. Explore sectors, states, and cities easily.">
  <meta name="keywords" content="JobPatra, jobs in India, company career pages, Indian companies hiring, IT jobs, government jobs, startup jobs">
  <meta name="author" content="JobPatra">
  <meta name="robots" content="index, follow">

  <!-- ‚úÖ Open Graph -->
  <meta property="og:title" content="JobPatra ‚Äì Find Real Jobs from Real Companies">
  <meta property="og:description" content="Explore genuine job openings directly from verified company career pages across India.">
  <meta property="og:image" content="https://jobpatra.github.io/logo.png">
  <meta property="og:url" content="https://jobpatra.github.io/">
  <meta property="og:type" content="website">

  <!-- ‚úÖ Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="JobPatra ‚Äì Find Real Jobs from Real Companies">
  <meta name="twitter:description" content="Discover genuine jobs from official company career pages in India.">
  <meta name="twitter:image" content="https://jobpatra.github.io/logo.png">

  <!-- ‚úÖ Favicon -->
  <link rel="icon" href="logo.png" type="image/png">

  <!-- ‚úÖ Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1948921365546153"
     crossorigin="anonymous"></script>

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f9ff;
      margin: 0;
      padding: 0;
      color: #222;
    }
    header {
      text-align: center;
      background-color: #1565c0;
      color: #fff;
      padding: 20px;
      font-size: 1.6rem;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .container {
      max-width: 600px;
      margin: 30px auto;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .note {
      background: #e3f2fd;
      color: #0d47a1;
      padding: 12px;
      border-radius: 8px;
      font-size: 0.95rem;
      text-align: center;
      margin-bottom: 15px;
      line-height: 1.5;
    }
    h2 {
      text-align: center;
      color: #0d47a1;
      font-size: 1.3rem;
      margin-bottom: 20px;
    }
    label {
      display: block;
      font-weight: 600;
      margin: 10px 0 5px;
      color: #333;
    }
    select, button {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 14px;
      font-size: 1rem;
      box-sizing: border-box;
    }
    select:focus {
      border-color: #1565c0;
      outline: none;
    }
    button {
      background-color: #1976d2;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.1rem;
      transition: 0.2s;
    }
    button:hover { background-color: #0d47a1; }
    .ad-banner { text-align: center; margin-top: 10px; }
    .ad-banner img {
      width: 100%;
      max-width: 468px;
      border-radius: 8px;
      transition: opacity 0.3s ease;
    }
    .error {
      color: #b71c1c;
      background: #ffebee;
      padding: 8px;
      border-radius: 6px;
      margin-bottom: 10px;
      display: none;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #777;
      padding: 20px;
    }
  </style>
</head>

<body>
  <header>üíº JobPatra</header>

  <div class="container">
    <div class="note">
      Some companies post openings only on their official career pages.
      Visit company websites directly if jobs aren‚Äôt listed elsewhere.
    </div>

    <div id="dataError" class="error">‚ö†Ô∏è Unable to load job data. Please refresh or check your internet connection.</div>

    <h2>Search Career Opportunities</h2>

    <label for="sector">Select Sector <small style="font-weight:600;color:#b71c1c;">(required)</small></label>
    <select id="sector"><option value="">-- Select Sector (required) --</option></select>

    <label for="state">Select State (optional)</label>
    <select id="state" disabled><option value="">Select State</option></select>

    <label for="city">Select City (optional)</label>
    <select id="city" disabled><option value="">Select City</option></select>

    <div id="formError" class="error">Please select a sector before searching.</div>

    <button id="searchBtn">üîç Search</button>

    <div class="ad-banner">
      <img id="indexAd" src="https://via.placeholder.com/468x60.png?text=Ad+1" alt="Ad Banner">
    </div>
  </div>

  <footer>
    <a href="about.html">About</a> |
    <a href="privacy.html">Privacy Policy</a> |
    <a href="disclaimer.html">Disclaimer</a> |
    <a href="contact.html">Contact</a>
    <br>¬© 2025 JobPatra. All rights reserved.
  </footer>

<script>
/* ‚úÖ Load CSV Data */
async function loadCSV() {
  try {
    const response = await fetch("data.csv");
    if (!response.ok) throw new Error("CSV not found");
    const text = await response.text();
    
    const rows = text.trim().split(/\r?\n/);
    const headers = rows[0].split(",").map(h => h.trim().toLowerCase());

    return rows.slice(1).map(line => {
      const values = line.split(",").map(v => v.replace(/^"|"$/g, '').trim());
      const entry = {};
      headers.forEach((h, i) => entry[h] = values[i]);
      return entry;
    });
  } catch (err) {
    console.error("‚ö†Ô∏è CSV Load Error:", err);
    document.getElementById("dataError").style.display = "block";
    return [];
  }
}

/* ‚úÖ Populate Dropdowns */
async function setupDropdowns() {
  const data = await loadCSV();
  const sectorSel = document.getElementById("sector");
  const stateSel = document.getElementById("state");
  const citySel = document.getElementById("city");

  const sectors = [...new Set(data.map(d => d.sector).filter(Boolean))].sort();
  sectors.forEach(sec => {
    const opt = document.createElement("option");
    opt.value = sec;
    opt.textContent = sec;
    sectorSel.appendChild(opt);
  });

  sectorSel.addEventListener("change", () => {
    const selSec = sectorSel.value;
    stateSel.innerHTML = '<option value="">Select State</option>';
    citySel.innerHTML = '<option value="">Select City</option>';
    citySel.disabled = true;

    if (!selSec) {
      stateSel.disabled = true;
      return;
    }

    const states = [...new Set(data.filter(d => d.sector === selSec).map(d => d.state).filter(Boolean))].sort();
    states.forEach(st => {
      const o = document.createElement("option");
      o.value = st;
      o.textContent = st;
      stateSel.appendChild(o);
    });
    stateSel.disabled = false;
  });

  stateSel.addEventListener("change", () => {
    const selSec = sectorSel.value;
    const selSt = stateSel.value;
    citySel.innerHTML = '<option value="">Select City</option>';
    const cities = [...new Set(data.filter(d => d.sector === selSec && d.state === selSt).map(d => d.city).filter(Boolean))].sort();
    cities.forEach(ct => {
      const o = document.createElement("option");
      o.value = ct;
      o.textContent = ct;
      citySel.appendChild(o);
    });
    citySel.disabled = cities.length === 0;
  });
}

/* ‚úÖ Initialize */
document.addEventListener("DOMContentLoaded", async () => {
  await setupDropdowns();

  const err = document.getElementById('formError');
  document.getElementById('searchBtn').addEventListener('click', () => {
    const s = document.getElementById('sector').value;
    const st = document.getElementById('state').value;
    const c = document.getElementById('city').value;
    if (!s) {
      err.style.display = 'block';
      return;
    }
    err.style.display = 'none';
    window.location.href = `results.html?sector=${encodeURIComponent(s)}&state=${encodeURIComponent(st)}&city=${encodeURIComponent(c)}`;
  });

  /* ‚úÖ Rotate Ad */
  const ads = [
    "https://via.placeholder.com/468x60.png?text=Ad+1",
    "https://via.placeholder.com/468x60.png?text=Ad+2",
    "https://via.placeholder.com/468x60.png?text=Ad+3"
  ];
  let i = 0;
  setInterval(() => {
    i = (i + 1) % ads.length;
    const img = document.getElementById('indexAd');
    img.style.opacity = 0;
    setTimeout(() => {
      img.src = ads[i];
      img.style.opacity = 1;
    }, 300);
  }, 10000);
});
</script>
</body>
</html>
